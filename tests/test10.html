<!DOCTYPE html>
<head>
  <!--<script src="http://live.yworks.com/yfiles-for-html/resources/scripts/rgbcolor.js"></script>-->
  <!--<script src="http://live.yworks.com/yfiles-for-html/resources/scripts/rgbcolor.js"></script>-->
  <script src="../../jsPDF/dist/jspdf.debug.js"></script>
  <script src="../rgbcolor.js"></script>
  <script src="../svg2pdf.js"></script>
</head>
<body>

<!--<textarea id="input" cols="200" rows="20"></textarea><br>
<button onclick="showSvg();">Show</button>
<br>-->

<div id="svgContent">
  <svg id="svgElement" xmlns="http://www.w3.org/2000/svg" width="623px" height="454px" viewBox="0 0 623 454" style="overflow: hidden; display: block; width: 623px; height: 454px;">
    <defs>
      <path fill="rgb(0,0,0)" stroke="rgb(0,0,0)" d="M 0,0 L 10,-5 L 5,0 L 10,5 Z" fill-opacity="1" stroke-opacity="1" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" id="ygc5_0"/>
    </defs><g style="pointer-events:visiblePainted" transform="translate(5.333333333333371 -4)" image-rendering="auto" shape-rendering="auto">
    <g>
      <path fill="none" stroke="rgb(0,0,0)" d="M 18.66666666666663,28 L 74.66666666666663,28" stroke-opacity="1" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10"/>
      <use transform="matrix(-1 0 0 -1 79.6667 28)" style="pointer-events: none;" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#ygc5_0"/>
    </g><g>
    <path fill="none" stroke="rgb(0,0,0)" d="M 146,189 L 146,231" stroke-opacity="1" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10"/>
    <use transform="matrix(0 -1 1 0 146 236)" style="pointer-events: none;" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#ygc5_0"/>
  </g><g>
    <path fill="none" stroke="rgb(0,0,0)" d="M 122,240 L 122,282" stroke-opacity="1" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10"/>
    <use transform="matrix(0 -1 1 0 122 287)" style="pointer-events: none;" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#ygc5_0"/>
  </g><g>
    <path fill="none" stroke="rgb(0,0,0)" d="M 117.2,100 L 117.2,119.60802469135808 Q 117.2,124.60802469135808 112.2,124.60802469135808 L 43,124.60802469135808 Q 38,124.60802469135808 38,129.60802469135808 L 38,142" stroke-opacity="1" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10"/>
    <use transform="matrix(0 -1 1 0 38 147)" style="pointer-events: none;" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#ygc5_0"/>
  </g><g>
    <path fill="none" stroke="rgb(0,0,0)" d="M 146,100 L 146,142" stroke-opacity="1" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10"/>
    <use transform="matrix(0 -1 1 0 146 147)" style="pointer-events: none;" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#ygc5_0"/>
  </g><g>
    <path fill="none" stroke="rgb(0,0,0)" d="M 155.66666666666663,28 L 220.2,28" stroke-opacity="1" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10"/>
    <use transform="matrix(-1 0 0 -1 225.2 28)" style="pointer-events: none;" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#ygc5_0"/>
  </g><g>
    <path fill="none" stroke="rgb(0,0,0)" d="M 117.66666666666663,49 L 117.66666666666663,91" stroke-opacity="1" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10"/>
    <use transform="matrix(0 -1 1 0 117.667 96)" style="pointer-events: none;" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#ygc5_0"/>
  </g><g>
    <path fill="none" stroke="rgb(0,0,0)" d="M 263.2,49 L 263.2,74.7731481481481 Q 263.2,79.7731481481481 258.2,79.7731481481481 L 189,79.7731481481481 Q 184,79.7731481481481 184,84.7731481481481 L 184,91" stroke-opacity="1" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10"/>
    <use transform="matrix(0 -1 1 0 184 96)" style="pointer-events: none;" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#ygc5_0"/>
  </g><g>
    <path fill="none" stroke="rgb(0,0,0)" d="M 301.2,28 L 378.8666666666667,28" stroke-opacity="1" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10"/>
    <use transform="matrix(-1 0 0 -1 383.867 28)" style="pointer-events: none;" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#ygc5_0"/>
  </g><g>
    <path fill="none" stroke="rgb(0,0,0)" d="M 415.8666666666667,43 L 415.8666666666667,142" stroke-opacity="1" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10"/>
    <use transform="matrix(0 -1 1 0 415.867 147)" style="pointer-events: none;" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#ygc5_0"/>
  </g><g>
    <path fill="none" stroke="rgb(0,0,0)" d="M 415.8666666666667,189 L 415.8666666666667,281.9999999999999" stroke-opacity="1" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10"/>
    <use transform="matrix(0 -1 1 0 415.867 287)" style="pointer-events: none;" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#ygc5_0"/>
  </g><g>
    <path fill="none" stroke="rgb(0,0,0)" d="M 415.8666666666667,328.9999999999999 L 415.8666666666667,421.9999999999998" stroke-opacity="1" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10"/>
    <use transform="matrix(0 -1 1 0 415.867 427)" style="pointer-events: none;" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#ygc5_0"/>
  </g><g>
    <path fill="none" stroke="rgb(0,0,0)" d="M 447.8666666666667,28 L 544.5333333333331,28 Q 549.5333333333331,28 549.5333333333331,33 L 549.5333333333332,142" stroke-opacity="1" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10"/>
    <use transform="matrix(-9.97253e-16 -1 1 -9.97253e-16 549.533 147)" style="pointer-events: none;" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#ygc5_0"/>
  </g><g>
    <path fill="none" stroke="rgb(0,0,0)" d="M 549.5333333333332,189 L 549.5333333333331,432.9999999999998 Q 549.5333333333331,437.9999999999998 544.5333333333331,437.9999999999998 L 432.8666666666667,437.9999999999998" stroke-opacity="1" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10"/>
    <use transform="translate(427.867 438)" style="pointer-events: none;" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#ygc5_0"/>
  </g><g>
    <path fill="none" stroke="rgb(0,0,0)" d="M 184,100 L 184,119.60802469135808 Q 184,124.60802469135808 189,124.60802469135808 L 258.2,124.60802469135808 Q 263.2,124.60802469135808 263.2,129.60802469135808 L 263.2,142" stroke-opacity="1" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10"/>
    <use transform="matrix(0 -1 1 0 263.2 147)" style="pointer-events: none;" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#ygc5_0"/>
  </g><g>
    <path fill="none" stroke="rgb(0,0,0)" d="M 122,329 L 122,346.9398148148148 Q 122,351.9398148148148 127,351.9398148148148 L 210.2,351.9398148148148 Q 215.2,351.9398148148148 215.2,356.9398148148148 L 215.2,371" stroke-opacity="1" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10"/>
    <use transform="matrix(0 -1 1 0 215.2 376)" style="pointer-events: none;" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#ygc5_0"/>
  </g><g>
    <path fill="none" stroke="rgb(0,0,0)" d="M 263.2,189 L 263.2,371" stroke-opacity="1" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10"/>
    <use transform="matrix(0 -1 1 0 263.2 376)" style="pointer-events: none;" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#ygc5_0"/>
  </g><g>
    <path fill="none" stroke="rgb(0,0,0)" d="M 277.2,437.9999999999998 L 398.8666666666667,437.9999999999998" stroke-opacity="1" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10"/>
    <use transform="matrix(-1 0 0 -1 403.867 438)" style="pointer-events: none;" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#ygc5_0"/>
  </g><g>
    <path fill="none" stroke="rgb(0,0,0)" d="M 239.2,380 L 239.2,411.9999999999998" stroke-opacity="1" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10"/>
    <use transform="matrix(0 -1 1 0 239.2 417)" style="pointer-events: none;" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#ygc5_0"/>
  </g><g>
    <path fill="none" stroke="rgb(0,0,0)" d="M 38,189 L 38,207.5 Q 38,212.5 43,212.5 L 93,212.5 Q 98,212.5 98,217.5 L 98,231" stroke-opacity="1" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10"/>
    <use transform="matrix(0 -1 1 0 98 236)" style="pointer-events: none;" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#ygc5_0"/>
  </g>
    <rect fill="rgb(255,204,0)" stroke="rgb(0,0,0)" fill-opacity="1" stroke-opacity="1" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" height="42" y="7" width="76" ry="10" x="79.6667" rx="10"/>
    <rect fill="rgb(255,204,0)" stroke="rgb(0,0,0)" fill-opacity="1" stroke-opacity="1" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" height="42" y="147" width="76" ry="10" x="0" rx="10"/>
    <rect fill="rgb(255,204,0)" stroke="rgb(0,0,0)" fill-opacity="1" stroke-opacity="1" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" height="42" y="147" width="76" ry="10" x="108" rx="10"/>
    <rect fill="rgb(255,204,0)" stroke="rgb(0,0,0)" fill-opacity="1" stroke-opacity="1" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" height="42" y="287" width="76" ry="10" x="84" rx="10"/>
    <ellipse fill="rgb(0,0,0)" fill-opacity="1" stroke="rgb(0,0,0)" stroke-opacity="1" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" cx="6.66667" ry="11" cy="28" rx="12"/>
    <ellipse fill="rgb(0,0,0)" fill-opacity="1" stroke="rgb(51,153,102)" stroke-opacity="1" stroke-width="3" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" cx="415.867" ry="11" cy="438" rx="12"/>
    <rect fill="rgb(0,0,0)" stroke="rgb(0,0,0)" fill-opacity="1" stroke-opacity="1" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" height="4" y="96" width="96" ry="10" x="98" rx="10"/>
    <rect fill="rgb(0,0,0)" stroke="rgb(0,0,0)" fill-opacity="1" stroke-opacity="1" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" height="4" y="236" width="96" ry="10" x="74" rx="10"/>
    <rect fill="rgb(0,0,0)" stroke="rgb(0,0,0)" fill-opacity="1" stroke-opacity="1" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" height="4" y="376" width="96" ry="10" x="191.2" rx="10"/>
    <path fill="rgb(153,204,0)" stroke="rgb(0,0,0)" d="M 32,0 L 64,14.999999999999998 L 32.00000000000001,30 L 0,15.000000000000004 Z" fill-opacity="1" stroke-opacity="1" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" transform="translate(383.8666666666667 13)"/>
    <rect fill="rgb(255,204,0)" stroke="rgb(0,0,0)" fill-opacity="1" stroke-opacity="1" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" height="42" y="7" width="76" ry="10" x="225.2" rx="10"/>
    <rect fill="rgb(255,204,0)" stroke="rgb(0,0,0)" fill-opacity="1" stroke-opacity="1" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" height="42" y="147" width="76" ry="10" x="377.867" rx="10"/>
    <rect fill="rgb(255,204,0)" stroke="rgb(0,0,0)" fill-opacity="1" stroke-opacity="1" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" height="42" y="287" width="76" ry="10" x="377.867" rx="10"/>
    <rect fill="rgb(255,204,0)" stroke="rgb(0,0,0)" fill-opacity="1" stroke-opacity="1" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" height="42" y="147" width="76" ry="10" x="511.533" rx="10"/>
    <rect fill="rgb(255,204,0)" stroke="rgb(0,0,0)" fill-opacity="1" stroke-opacity="1" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" height="42" y="147" width="76" ry="10" x="225.2" rx="10"/>
    <rect fill="rgb(255,204,0)" stroke="rgb(0,0,0)" fill-opacity="1" stroke-opacity="1" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" height="42" y="417" width="76" ry="10" x="201.2" rx="10"/>
    <g transform="translate(159.4333333333333 4)">
      <text font-family="Arial" font-size="12px" font-style="normal" font-weight="normal" text-anchor="start" fill="rgb(0,0,0)" fill-opacity="1" dy="1em" transform="translate(0 0)">Not Found</text>
    </g><g transform="translate(42.66666666666663 49)">
    <text font-family="Arial" font-size="12px" font-style="normal" font-weight="normal" text-anchor="start" fill="rgb(0,0,0)" fill-opacity="1" dy="1em" transform="translate(0 0)">Found Keys</text>
  </g><g transform="translate(191.1 55.773148148148096)">
    <text font-family="Arial" font-size="12px" font-style="normal" font-weight="normal" text-anchor="start" fill="rgb(0,0,0)" fill-opacity="1" dy="1em" transform="translate(0 0)">Found Keys</text>
  </g><g transform="translate(311.5333333333333 4)">
    <text font-family="Arial" font-size="12px" font-style="normal" font-weight="normal" text-anchor="start" fill="rgb(0,0,0)" fill-opacity="1" dy="1em" transform="translate(0 0)">Not Found</text>
  </g><g transform="translate(425.8666666666667 76.5)">
    <text font-family="Arial" font-size="12px" font-style="normal" font-weight="normal" text-anchor="start" fill="rgb(0,0,0)" fill-opacity="1" transform="translate(0 0)">
      <tspan x="0" dy="1em">Found Bike </tspan>
      <tspan x="0" dy="1.5em">Lock Keys</tspan>
    </text>
  </g><g transform="translate(559.5333333333331 44.400000000000006)">
    <text font-family="Arial" font-size="12px" font-style="normal" font-weight="normal" text-anchor="start" fill="rgb(0,0,0)" fill-opacity="1" transform="translate(0 0)">
      <tspan x="0" dy="1em">No Bike </tspan>
      <tspan x="0" dy="1.5em">Lock Keys </tspan>
    </text>
  </g><g transform="translate(79.66666666666663 7)">
    <text font-family="Arial" font-size="12px" font-style="normal" font-weight="normal" text-anchor="middle" fill="rgb(0,0,0)" fill-opacity="1" transform="translate(38 5)">
      <tspan dy="1em" x="0">Get Car</tspan>
      <tspan dy="1.5em" x="0">Keys</tspan>
    </text>
  </g><g transform="translate(0 147)">
    <text font-family="Arial" font-size="12px" font-style="normal" font-weight="normal" text-anchor="middle" fill="rgb(0,0,0)" fill-opacity="1" transform="translate(38 5)">
      <tspan dy="1em" x="0">Put Keys in </tspan>
      <tspan dy="1.5em" x="0">Ignition Lock</tspan>
    </text>
  </g><g transform="translate(108 147)">
    <text font-family="Arial" font-size="12px" font-style="normal" font-weight="normal" text-anchor="middle" fill="rgb(0,0,0)" fill-opacity="1" transform="translate(38 5)">
      <tspan dy="1em" x="0">Fasten</tspan>
      <tspan dy="1.5em" x="0">Seat Belt</tspan>
    </text>
  </g><g transform="translate(84 287)">
    <text font-family="Arial" font-size="12px" font-style="normal" font-weight="normal" text-anchor="middle" fill="rgb(0,0,0)" fill-opacity="1" transform="translate(38 14)">
      <tspan dy="1em" x="0">Start Car</tspan>
    </text>
  </g><g transform="translate(225.2 7)">
    <text font-family="Arial" font-size="12px" font-style="normal" font-weight="normal" text-anchor="middle" fill="rgb(0,0,0)" fill-opacity="1" transform="translate(38 5)">
      <tspan dy="1em" x="0">Look in </tspan>
      <tspan dy="1.5em" x="0">Other Pants</tspan>
    </text>
  </g><g transform="translate(377.8666666666667 147)">
    <text font-family="Arial" font-size="12px" font-style="normal" font-weight="normal" text-anchor="middle" fill="rgb(0,0,0)" fill-opacity="1" transform="translate(38 5)">
      <tspan dy="1em" x="0">Unlock </tspan>
      <tspan dy="1.5em" x="0">Bike</tspan>
    </text>
  </g><g transform="translate(377.8666666666667 286.9999999999999)">
    <text font-family="Arial" font-size="12px" font-style="normal" font-weight="normal" text-anchor="middle" fill="rgb(0,0,0)" fill-opacity="1" transform="translate(38 5)">
      <tspan dy="1em" x="0">Go by</tspan>
      <tspan dy="1.5em" x="0">Bike</tspan>
    </text>
  </g><g transform="translate(511.5333333333332 147)">
    <text font-family="Arial" font-size="12px" font-style="normal" font-weight="normal" text-anchor="middle" fill="rgb(0,0,0)" fill-opacity="1" transform="translate(38 14)">
      <tspan dy="1em" x="0">Walk</tspan>
    </text>
  </g><g transform="translate(225.2 147)">
    <text font-family="Arial" font-size="12px" font-style="normal" font-weight="normal" text-anchor="middle" fill="rgb(0,0,0)" fill-opacity="1" transform="translate(38 5)">
      <tspan dy="1em" x="0">Check Rear </tspan>
      <tspan dy="1.5em" x="0">Mirror</tspan>
    </text>
  </g><g transform="translate(201.2 416.9999999999998)">
    <text font-family="Arial" font-size="12px" font-style="normal" font-weight="normal" text-anchor="middle" fill="rgb(0,0,0)" fill-opacity="1" transform="translate(38 5)">
      <tspan dy="1em" x="0">Start</tspan>
      <tspan dy="1.5em" x="0">Driving</tspan>
    </text>
  </g>
  </g>
  </svg>
</div>

<button onclick="save();">Convert</button>
<br>

<iframe id="pdf" width="800px" height="400px"></iframe>

<script>
  function svgToPdf(svgElement, margin) {
    var width = svgElement.width.baseVal.value + 2 * margin;
    var height = svgElement.height.baseVal.value + 2 * margin;
    var pdf = new jsPDF('l', 'pt', [width, height]);
    svgElementToPdf(svgElement, pdf, {removeInvalid: true});

    return pdf.output('datauristring');
  }

  function saveToFile(/**string*/ fileContentUrl, /**string*/ fileName, /**function(Object, yfiles.canvas.FileEventArgs)*/ handler) {
    var aElement = document.createElement("a");
    aElement.setAttribute("href", fileContentUrl);
    aElement.setAttribute("download", fileName);
    aElement.style.setProperty("display", "none", "");
    document.body.appendChild(aElement);
    aElement.click();
    document.body.removeChild(aElement);

    handler();
  }

  function save() {
//    saveToFile(svgToPdf(document.getElementById("svgElement"), 0), "svg.pdf", function () {
//    });
    document.getElementById("pdf").src = svgToPdf(document.getElementById("svgElement"), 0);
  }

  function showSvg() {
    document.getElementById("svgContent").innerHTML = document.getElementById("input").value;
  }
</script>
</body>