<!DOCTYPE html>
<head>
  <!--<script src="http://live.yworks.com/yfiles-for-html/resources/scripts/rgbcolor.js"></script>-->
  <!--<script src="http://live.yworks.com/yfiles-for-html/resources/scripts/rgbcolor.js"></script>-->
  <script src="https://rawgit.com/yWorks/jsPDF/master/dist/jspdf.debug.js"></script>
  <script src="../src/rgbcolor.js"></script>
  <script src="../src/svg2pdf.js"></script>
</head>
<body>

<!--<textarea id="input" cols="200" rows="20"></textarea><br>
<button onclick="showSvg();">Show</button>
<br>-->

<div id="svgContent">

  <?xml version="1.0"?>
  <svg xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" id="svgElement" version="1.1" style="font-family:'lucida grande', 'lucida sans unicode', arial, helvetica, sans-serif;font-size:14px;" width="600" height="400">
  <desc>Created with Highcharts 4.2.6</desc>
  <defs>
      <clipPath id="highcharts-7">
          <rect x="0" y="0" width="520" height="247"/>
      </clipPath>
  </defs>
  <rect x="0" y="0" width="600" height="400" fill="#FFFFFF" class=" highcharts-background"/>
  <g class="highcharts-grid"/>
  <g class="highcharts-grid">
      <path fill="none" d="M 70 327.5 L 590 327.5" stroke="#D8D8D8" stroke-width="1" opacity="1"/>
      <path fill="none" d="M 70 278.5 L 590 278.5" stroke="#D8D8D8" stroke-width="1" opacity="1"/>
      <path fill="none" d="M 70 228.5 L 590 228.5" stroke="#D8D8D8" stroke-width="1" opacity="1"/>
      <path fill="none" d="M 70 179.5 L 590 179.5" stroke="#D8D8D8" stroke-width="1" opacity="1"/>
      <path fill="none" d="M 70 129.5 L 590 129.5" stroke="#D8D8D8" stroke-width="1" opacity="1"/>
      <path fill="none" d="M 70 79.5 L 590 79.5" stroke="#D8D8D8" stroke-width="1" opacity="1"/>
  </g>
  <g class="highcharts-axis">
      <path fill="none" d="M 112.5 327 L 112.5 337" stroke="#C0D0E0" stroke-width="1" opacity="1"/>
      <path fill="none" d="M 156.5 327 L 156.5 337" stroke="#C0D0E0" stroke-width="1" opacity="1"/>
      <path fill="none" d="M 199.5 327 L 199.5 337" stroke="#C0D0E0" stroke-width="1" opacity="1"/>
      <path fill="none" d="M 242.5 327 L 242.5 337" stroke="#C0D0E0" stroke-width="1" opacity="1"/>
      <path fill="none" d="M 286.5 327 L 286.5 337" stroke="#C0D0E0" stroke-width="1" opacity="1"/>
      <path fill="none" d="M 329.5 327 L 329.5 337" stroke="#C0D0E0" stroke-width="1" opacity="1"/>
      <path fill="none" d="M 372.5 327 L 372.5 337" stroke="#C0D0E0" stroke-width="1" opacity="1"/>
      <path fill="none" d="M 416.5 327 L 416.5 337" stroke="#C0D0E0" stroke-width="1" opacity="1"/>
      <path fill="none" d="M 459.5 327 L 459.5 337" stroke="#C0D0E0" stroke-width="1" opacity="1"/>
      <path fill="none" d="M 502.5 327 L 502.5 337" stroke="#C0D0E0" stroke-width="1" opacity="1"/>
      <path fill="none" d="M 546.5 327 L 546.5 337" stroke="#C0D0E0" stroke-width="1" opacity="1"/>
      <path fill="none" d="M 590.5 327 L 590.5 337" stroke="#C0D0E0" stroke-width="1" opacity="1"/>
      <path fill="none" d="M 69.5 327 L 69.5 337" stroke="#C0D0E0" stroke-width="1" opacity="1"/>
      <path fill="none" d="M 70 327.5 L 590 327.5" stroke="#C0D0E0" stroke-width="1"/>
  </g>
  <g class="highcharts-axis">
      <text x="24.140625" text-anchor="middle" transform="translate(0,0) rotate(270 24.140625 203.5)" class=" highcharts-yaxis-title" style="color:#707070;fill:#707070;" y="203.5">Values</text>
  </g>
  <g class="highcharts-series-group">
      <g class="highcharts-series highcharts-series-0" transform="translate(70,80) scale(1 1)" clip-path="url(#highcharts-7)">
          <path fill="none" d="M 21.666666666667 217.4588 L 65 176.358 L 108.33333333333 141.8768 L 151.66666666667 119.35040000000001 L 195 104.72800000000001 L 238.33333333333 73.112 L 281.66666666667 113.0272 L 325 100.28200000000001 L 368.33333333333 33.196799999999996 L 411.66666666667 55.22920000000002 L 455 152.5472 L 498.33333333333 193.2528" stroke="#7cb5ec" stroke-width="2" stroke-linejoin="round" stroke-linecap="round"/>
      </g>
      <g class="highcharts-markers highcharts-series-0" transform="translate(70,80) scale(1 1)" clip-path="none">
          <path fill="#7cb5ec" d="M 498 189.2528 C 503.328 189.2528 503.328 197.2528 498 197.2528 C 492.672 197.2528 492.672 189.2528 498 189.2528 Z"/>
          <path fill="#7cb5ec" d="M 455 148.5472 C 460.328 148.5472 460.328 156.5472 455 156.5472 C 449.672 156.5472 449.672 148.5472 455 148.5472 Z"/>
          <path fill="#7cb5ec" d="M 411 51.22920000000002 C 416.328 51.22920000000002 416.328 59.22920000000002 411 59.22920000000002 C 405.672 59.22920000000002 405.672 51.22920000000002 411 51.22920000000002 Z"/>
          <path fill="#7cb5ec" d="M 368 29.196799999999996 C 373.328 29.196799999999996 373.328 37.196799999999996 368 37.196799999999996 C 362.672 37.196799999999996 362.672 29.196799999999996 368 29.196799999999996 Z"/>
          <path fill="#7cb5ec" d="M 325 96.28200000000001 C 330.328 96.28200000000001 330.328 104.28200000000001 325 104.28200000000001 C 319.672 104.28200000000001 319.672 96.28200000000001 325 96.28200000000001 Z"/>
          <path fill="#7cb5ec" d="M 281 109.0272 C 286.328 109.0272 286.328 117.0272 281 117.0272 C 275.672 117.0272 275.672 109.0272 281 109.0272 Z"/>
          <path fill="#7cb5ec" d="M 238 69.112 C 243.328 69.112 243.328 77.112 238 77.112 C 232.672 77.112 232.672 69.112 238 69.112 Z"/>
          <path fill="#7cb5ec" d="M 195 100.72800000000001 C 200.328 100.72800000000001 200.328 108.72800000000001 195 108.72800000000001 C 189.672 108.72800000000001 189.672 100.72800000000001 195 100.72800000000001 Z"/>
          <path fill="#7cb5ec" d="M 151 115.35040000000001 C 156.328 115.35040000000001 156.328 123.35040000000001 151 123.35040000000001 C 145.672 123.35040000000001 145.672 115.35040000000001 151 115.35040000000001 Z"/>
          <path fill="#7cb5ec" d="M 108 137.8768 C 113.328 137.8768 113.328 145.8768 108 145.8768 C 102.672 145.8768 102.672 137.8768 108 137.8768 Z"/>
          <path fill="#7cb5ec" d="M 65 172.358 C 70.328 172.358 70.328 180.358 65 180.358 C 59.672 180.358 59.672 172.358 65 172.358 Z"/>
          <path fill="#7cb5ec" d="M 21 213.4588 C 26.328 213.4588 26.328 221.4588 21 221.4588 C 15.672 221.4588 15.672 213.4588 21 213.4588 Z"/>
      </g>
  </g>
  <text x="300" text-anchor="middle" class="highcharts-title" style="color:#333333;font-size:18px;fill:#333333;width:536px;" y="24">
      <tspan>Chart title</tspan>
  </text>
  <text x="300" text-anchor="middle" class="highcharts-subtitle" style="color:#555555;fill:#555555;width:536px;" y="46">
      <tspan>This text has </tspan>
      <tspan style="font-weight:bold" dx="0">bold</tspan>
      <tspan dx="0">, </tspan>
      <tspan style="font-style:italic" dx="0">italic</tspan>
      <tspan dx="0">, </tspan>
      <tspan style="fill: red" dx="0">coloured</tspan>
      <tspan dx="0">, </tspan>
      <tspan dx="0">linked</tspan>
      <tspan dx="0"> and</tspan>
      <tspan x="300" dy="15">line-broken text.</tspan>
  </text>
  <g class="highcharts-legend" transform="translate(257,360)">
      <g>
          <g>
              <g class="highcharts-legend-item" transform="translate(8,3)">
                  <path fill="none" d="M 0 11 L 16 11" stroke="#7cb5ec" stroke-width="2"/>
                  <path fill="#7cb5ec" d="M 8 7 C 13.328 7 13.328 15 8 15 C 2.6719999999999997 15 2.6719999999999997 7 8 7 Z"/>
                  <text x="21" style="color:#333333;font-size:12px;font-weight:bold;cursor:pointer;fill:#333333;" text-anchor="start" y="15">
                      <tspan>Series 1</tspan>
                  </text>
              </g>
          </g>
      </g>
  </g>
  <g class="highcharts-axis-labels highcharts-xaxis-labels">
      <text x="91.66666666666667" style="color:#606060;cursor:default;font-size:11px;fill:#606060;" text-anchor="middle" transform="translate(0,0)" y="346" opacity="1">Jan</text>
      <text x="135.00000000000003" style="color:#606060;cursor:default;font-size:11px;fill:#606060;" text-anchor="middle" transform="translate(0,0)" y="346" opacity="1">Feb</text>
      <text x="178.33333333333334" style="color:#606060;cursor:default;font-size:11px;fill:#606060;" text-anchor="middle" transform="translate(0,0)" y="346" opacity="1">Mar</text>
      <text x="221.66666666666669" style="color:#606060;cursor:default;font-size:11px;fill:#606060;" text-anchor="middle" transform="translate(0,0)" y="346" opacity="1">Apr</text>
      <text x="264.99999999999994" style="color:#606060;cursor:default;font-size:11px;fill:#606060;" text-anchor="middle" transform="translate(0,0)" y="346" opacity="1">May</text>
      <text x="308.3333333333333" style="color:#606060;cursor:default;font-size:11px;fill:#606060;" text-anchor="middle" transform="translate(0,0)" y="346" opacity="1">Jun</text>
      <text x="351.6666666666667" style="color:#606060;cursor:default;font-size:11px;fill:#606060;" text-anchor="middle" transform="translate(0,0)" y="346" opacity="1">Jul</text>
      <text x="395" style="color:#606060;cursor:default;font-size:11px;fill:#606060;" text-anchor="middle" transform="translate(0,0)" y="346" opacity="1">Aug</text>
      <text x="438.33333333333337" style="color:#606060;cursor:default;font-size:11px;fill:#606060;" text-anchor="middle" transform="translate(0,0)" y="346" opacity="1">Sep</text>
      <text x="481.6666666666667" style="color:#606060;cursor:default;font-size:11px;fill:#606060;" text-anchor="middle" transform="translate(0,0)" y="346" opacity="1">Oct</text>
      <text x="525.0000000000001" style="color:#606060;cursor:default;font-size:11px;fill:#606060;" text-anchor="middle" transform="translate(0,0)" y="346" opacity="1">Nov</text>
      <text x="568.3333333333334" style="color:#606060;cursor:default;font-size:11px;fill:#606060;" text-anchor="middle" transform="translate(0,0)" y="346" opacity="1">Dec</text>
  </g>
  <g class="highcharts-axis-labels highcharts-yaxis-labels">
      <text x="55" style="color:#606060;cursor:default;font-size:11px;fill:#606060;width:188px;text-overflow:clip;" text-anchor="end" transform="translate(0,0)" y="332" opacity="1">
          <tspan>0</tspan>
      </text>
      <text x="55" style="color:#606060;cursor:default;font-size:11px;fill:#606060;width:188px;text-overflow:clip;" text-anchor="end" transform="translate(0,0)" y="282" opacity="1">
          <tspan>50</tspan>
      </text>
      <text x="55" style="color:#606060;cursor:default;font-size:11px;fill:#606060;width:188px;text-overflow:clip;" text-anchor="end" transform="translate(0,0)" y="233" opacity="1">
          <tspan>100</tspan>
      </text>
      <text x="55" style="color:#606060;cursor:default;font-size:11px;fill:#606060;width:188px;text-overflow:clip;" text-anchor="end" transform="translate(0,0)" y="183" opacity="1">
          <tspan>150</tspan>
      </text>
      <text x="55" style="color:#606060;cursor:default;font-size:11px;fill:#606060;width:188px;text-overflow:clip;" text-anchor="end" transform="translate(0,0)" y="134" opacity="1">
          <tspan>200</tspan>
      </text>
      <text x="55" style="color:#606060;cursor:default;font-size:11px;fill:#606060;width:188px;text-overflow:clip;" text-anchor="end" transform="translate(0,0)" y="85" opacity="1">
          <tspan>250</tspan>
      </text>
  </g>
  <g class="highcharts-tooltip" style="cursor:default;padding:0;pointer-events:none;white-space:nowrap;" transform="translate(0,-9000000000)">
      <path fill="none" d="M 3.5 0.5 L 13.5 0.5 C 16.5 0.5 16.5 0.5 16.5 3.5 L 16.5 13.5 C 16.5 16.5 16.5 16.5 13.5 16.5 L 3.5 16.5 C 0.5 16.5 0.5 16.5 0.5 13.5 L 0.5 3.5 C 0.5 0.5 0.5 0.5 3.5 0.5" stroke="black" stroke-opacity="0.049999999999999996" stroke-width="5" transform="translate(1, 1)"/>
      <path fill="none" d="M 3.5 0.5 L 13.5 0.5 C 16.5 0.5 16.5 0.5 16.5 3.5 L 16.5 13.5 C 16.5 16.5 16.5 16.5 13.5 16.5 L 3.5 16.5 C 0.5 16.5 0.5 16.5 0.5 13.5 L 0.5 3.5 C 0.5 0.5 0.5 0.5 3.5 0.5" stroke="black" stroke-opacity="0.09999999999999999" stroke-width="3" transform="translate(1, 1)"/>
      <path fill="none" d="M 3.5 0.5 L 13.5 0.5 C 16.5 0.5 16.5 0.5 16.5 3.5 L 16.5 13.5 C 16.5 16.5 16.5 16.5 13.5 16.5 L 3.5 16.5 C 0.5 16.5 0.5 16.5 0.5 13.5 L 0.5 3.5 C 0.5 0.5 0.5 0.5 3.5 0.5" stroke="black" stroke-opacity="0.15" stroke-width="1" transform="translate(1, 1)"/>
      <path fill="rgb(249, 249, 249)" fill-opacity=" .85" d="M 3.5 0.5 L 13.5 0.5 C 16.5 0.5 16.5 0.5 16.5 3.5 L 16.5 13.5 C 16.5 16.5 16.5 16.5 13.5 16.5 L 3.5 16.5 C 0.5 16.5 0.5 16.5 0.5 13.5 L 0.5 3.5 C 0.5 0.5 0.5 0.5 3.5 0.5"/>
      <text x="8" style="font-size:12px;color:#333333;fill:#333333;" y="20"/>
  </g>
  <text x="590" text-anchor="end" style="cursor:pointer;color:#909090;font-size:9px;fill:#909090;" y="395">Highcharts.com</text>
  </svg>


</div>

<button onclick="save();">Convert</button>
<br>

<iframe id="pdf" width="800px" height="800px"></iframe>

<script>
  function svgToPdf(svgElement, margin) {
    var width = svgElement.width.baseVal.value + 2 * margin;
    var height = svgElement.height.baseVal.value + 2 * margin;
    var pdf = new jsPDF('l', 'pt', [width, height]);
    svgElementToPdf(svgElement, pdf, {removeInvalid: true});

    return pdf.output('datauristring');
  }

  function saveToFile(/**string*/ fileContentUrl, /**string*/ fileName, /**function(Object, yfiles.canvas.FileEventArgs)*/ handler) {
    var aElement = document.createElement("a");
    aElement.setAttribute("href", fileContentUrl);
    aElement.setAttribute("download", fileName);
    aElement.style.setProperty("display", "none", "");
    document.body.appendChild(aElement);
    aElement.click();
    document.body.removeChild(aElement);

    handler();
  }

  function save() {
//    saveToFile(svgToPdf(document.getElementById("svgElement"), 0), "svg.pdf", function () {
//    });
    document.getElementById("pdf").src = svgToPdf(document.getElementById("svgElement"), 0);
  }

  function showSvg() {
    document.getElementById("svgContent").innerHTML = document.getElementById("input").value;
  }
</script>
</body>
