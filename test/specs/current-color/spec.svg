<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 500 600" width="500" height="600" style="overflow: hidden; display: block; width: 500px; height: 600px;">
  <defs style="color:#FF00FF">
      <rect width="100" height="100" style="fill:currentColor" id="use-test"/>
      <linearGradient id="grad-test1" gradientTransform="rotate(90)">
        <stop offset="5%" color="#F0F0F0" stop-color="currentcolor" />
        <stop offset="95%" stop-color="currentcolor" />
      </linearGradient>
      <linearGradient style="color:#FF0000;" id="grad-test2" gradientTransform="rotate(90)">
        <stop offset="5%" stop-color="black" />
        <stop offset="95%" stop-color="currentcolor" />
      </linearGradient>
  </defs>

  <rect x="0" y="0" width="100" height="100" style="fill:currentColor"/>
  <rect x="110" y="0" width="100" height="100" style="color:#INVALID;fill:currentColor;"/>
  <use x="220" y="0" href="#use-test"/>
  <rect x="330" y="0" width="100" height="100" style="color:#00FF00;" fill="url(#grad-test1)"/>

  <rect x="0" y="110" width="100" height="100" style="color:#FF0000;fill:currentColor;"/>
  <rect x="110" y="110" width="100" height="100" style="color:#FF0000;stroke:currentColor;"/>
  <use x="220" y="110" href="#use-test" style="color:#FF0000;fill:currentColor;"/>
  <rect x="330" y="110" width="100" height="100" style="color:#00FF00;" fill="url(#grad-test2)"/>

  <g color="rgba(255,0,0,0.5)">
    <rect x="0" y="220" width="100" height="100" style="fill:currentColor"/>
    <rect x="110" y="220" width="100" height="100" style="stroke:currentColor"/>
    <use x="220" y="220" href="#use-test"/>
    <rect x="330" y="220" width="100" height="100" fill="url(#grad-test1)"/>

    <g color="#00FF00">
      <rect x="0" y="330" width="100" height="100" style="fill:currentColor"/>
      <rect x="110" y="330" width="100" height="100" style="stroke:currentColor"/>
      <use x="220" y="330" href="#use-test"/>
      <rect x="330" y="330" width="100" height="100" fill="url(#grad-test2)"/>
    </g>
  </g>
  <rect x="0" y="440" width="100" height="100" style="color:#0000FF;fill:currentColor;color:#FFFF00;"/>
  <rect x="110" y="440" width="100" height="100" style="fill:currentColor"/>
  <use x="220" y="440" href="#use-test" style="color:#0000FF;fill:currentColor;color:#FFFF00;"/>
</svg>